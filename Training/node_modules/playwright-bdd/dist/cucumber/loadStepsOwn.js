"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadStepsOwn = void 0;
/**
 * Load steps using Playwright's import instead of Cucumber's tryRequire.
 * Based on: https://github.com/cucumber/cucumber-js/blob/main/src/api/support.ts
 */
const messages_1 = require("@cucumber/messages");
const cucumber_1 = require("@cucumber/cucumber");
const paths_1 = require("../utils/paths");
const transform_1 = require("../playwright/transform");
const utils_1 = require("../utils");
const newId = messages_1.IdGenerator.uuid();
async function loadStepsOwn(cwd, stepPaths) {
    cucumber_1.supportCodeLibraryBuilder.reset(cwd, newId, {
        requireModules: [],
        requirePaths: [],
        importPaths: [],
        loaders: [], // for cucumber 10.6
    });
    const stepFiles = await (0, paths_1.resolveFiles)(cwd, (0, utils_1.toArray)(stepPaths), '{js,mjs,cjs,ts,mts,cts}');
    const { requireOrImport } = (0, transform_1.requireTransform)();
    for (const file of stepFiles) {
        await requireOrImport(file);
    }
    return cucumber_1.supportCodeLibraryBuilder.finalize();
}
exports.loadStepsOwn = loadStepsOwn;
//# sourceMappingURL=loadStepsOwn.js.map